<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/home.css">
    <title>tarefas 24</title>
</head>
<body>
    <a href="/auth/logout" class="btn btn-danger m-3 logout-button">Sair</a>
    <h1 class="text-center mt-5 mb-3">Tarefas</h1>
    <% if(tasks.length) { %>
        <ul class="list-group m-auto col-md-6 col-lg-4 col-12 px-2">
        <% tasks.forEach(task => { %>
            <% if(task.done) { %>
                <li class="list-group-item list-group-item-done list-group-item-light d-flex justify-content-between">
                    <a href="/tasks/complete/<%= task._id %>" class="border border-success border-2 rounded-circle d-flex align-items-center justify-content-center action-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-check text-success" viewBox="0 0 16 16">
                            <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"/>
                        </svg>
                    </a>
            <% } else { %>
                <li class="list-group-item d-flex justify-content-between">
                    <a href="/tasks/complete/<%= task._id %>" class="border border-secondary border-2 rounded-circle action-icon"></a>
            <% } %>
                <p class="my-auto mx-2 text-start">
                    <%= task.title %>
                </p>
                <span>
                    <%= Math.trunc((task.deleteDate - Date.now()) / (60*60*1000)) %> 
                    : 
                    <%= Math.trunc(((task.deleteDate - Date.now()) / (60*60*1000) - Math.trunc((task.deleteDate - Date.now()) / (60*60*1000))) * 60) %>
                </span>
            </li>
        <% }) %>
        </ul>
    <% } else { %>
        <h3 class="text-center my-3">VocÃª nÃ£o possui nenhuma tarefa</h3>
    <% } %>
    <a href="/tasks/add" class="add-button mx-auto mt-5 bg-primary rounded-circle d-flex align-items-center justify-content-center">+</a>
</body>
</html>